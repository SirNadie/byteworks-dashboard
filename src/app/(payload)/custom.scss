/* ByteWorks Dashboard Theme (Safe Revision) */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

/* 
   STRATEGY: Only override CSS Variables directly.
   Do NOT touch layout/positioning/flexbox of core elements.
*/

:root {
    /* Brand Colors */
    --bw-primary: #06B6D4;

    /* Modern Dark Palette (Slate) */
    --theme-bg: #020617;
    /* Deepest background */
    --theme-elevation-0: #0f172a;
    /* Sidebar / Header */
    --theme-elevation-50: #1e293b;
    /* Cards */
    --theme-elevation-100: #334155;
    /* Modals / Hovers */

    --theme-text: #f8fafc;
    --theme-text-muted: #94a3b8;

    --font-body: 'Inter', sans-serif;

    /* Input Fields */
    --theme-input-bg: #020617;
    --theme-input-border: #334155;

    /* Success/Action Colors */
    --theme-success-500: var(--bw-primary);
}

/* Force Font Globally */
body,
html {
    font-family: 'Inter', sans-serif;
}

/* HIDE API/EDIT TABS GLOBALLY for cleaner UI */
.doc-tabs__tabs {
    display: none !important;
}

/* 
   LOGIN PAGE SPECIFIC
   It's safe to style this heavily as it's an isolated template 
*/
[class*="template-default"] {
    background: #020617 !important;
}

[id*="login"] {
    background-color: #0f172a !important;
    border: 1px solid #1e293b !important;
    border-radius: 16px !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
}

/* Button Styling (Safe) */
.btn--style-primary {
    background-color: var(--bw-primary) !important;
    border: none !important;
    border-radius: 6px !important;
    font-weight: 600 !important;
    color: white !important;
}

.btn--style-primary:hover {
    filter: brightness(1.1);
}

/* 
   WEBSITE STATS WIDGET ONLY 
   Targeting the specific dashboard component we built
*/

/* Hide unwanted header elements ONLY on the Analytics view if possible.
   Since we can't condition CSS on URL, we leave the header alone to avoid breaking layout.
   Instead, we just style our widget better.
*/

/* Hiding the Save button globally is risky, but safe for dashboard if it's the only page using .form-submit.
   Better to just leave it if it causes layout breakages. 
   Let's just clean up the "Collection List" cards.
*/

.card {
    border: 1px solid #1e293b !important;
    border-radius: 8px !important;
    background-color: #1e293b !important;
}

.card:hover {
    border-color: var(--bw-primary) !important;
}

/* ========================================
   RESPONSIVE STYLES FOR LINE ITEMS TABLE
   ======================================== */

/* Line Items Table - Responsive wrapper */
.line-items-table-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Mobile responsive adjustments - Card-based layout for Line Items */
@media (max-width: 768px) {

    /* Make collapsible sections take full width */
    [class*="collapsible"] {
        flex-basis: 100% !important;
    }

    /* Row fields should stack vertically on mobile */
    .field-type.row {
        flex-direction: column;
    }

    .field-type.row>.render-fields {
        flex-direction: column;
    }

    .field-type.row>.render-fields>* {
        width: 100% !important;
        flex-basis: 100% !important;
    }

    /* Line Items Table to Cards Transformation */
    .line-items-table-wrapper {
        overflow-x: visible;
    }

    .line-items-table-wrapper table {
        min-width: unset;
        display: block;
        background: transparent !important;
    }

    .line-items-table-wrapper thead {
        display: none !important;
        /* Hide table headers on mobile */
    }

    .line-items-table-wrapper tbody {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .line-items-table-wrapper tbody tr {
        display: flex;
        flex-direction: column;
        background-color: var(--theme-elevation-50);
        border-radius: 12px;
        padding: 16px;
        border: 1px solid var(--theme-elevation-100);
        gap: 12px;
    }

    .line-items-table-wrapper tbody tr td {
        display: flex;
        flex-direction: column;
        padding: 0 !important;
        border: none !important;
        gap: 6px;
        text-align: left !important;
    }

    /* Add labels before each field using data-label */
    .line-items-table-wrapper tbody tr td[data-label]::before {
        content: attr(data-label);
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--theme-elevation-500);
        margin-bottom: 4px;
        pointer-events: none;
        /* CRITICAL: Allow clicks to pass through */
    }

    /* Ensure all interactive elements are clickable */
    .line-items-table-wrapper tbody tr td input,
    .line-items-table-wrapper tbody tr td button {
        pointer-events: auto !important;
        position: relative;
        z-index: 10;
    }

    /* ===== FIELD ORDER FOR MOBILE CARDS ===== */

    /* 1. Description - first */
    .line-items-table-wrapper tbody tr td[data-label="Description"] {
        order: 1;
    }

    .line-items-table-wrapper tbody tr td[data-label="Description"] input {
        width: 100% !important;
    }

    .line-items-table-wrapper tbody tr td[data-label="Description"]>div {
        flex-direction: column;
        align-items: flex-start !important;
        gap: 8px !important;
    }

    /* 2. Quantity - second */
    .line-items-table-wrapper tbody tr td[data-label="Quantity"] {
        order: 2;
    }

    /* 3. Unit Price - third */
    .line-items-table-wrapper tbody tr td[data-label="Unit Price"] {
        order: 3;
    }

    /* 4. Item Total - fourth, highlighted */
    .line-items-table-wrapper tbody tr td[data-label="Item Total"] {
        order: 4;
        background-color: var(--theme-elevation-100);
        padding: 12px !important;
        border-radius: 8px;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }

    /* 5. Actions - last */
    .line-items-table-wrapper tbody tr td[data-label="Actions"] {
        order: 5;
        padding-top: 12px !important;
        border-top: 1px solid var(--theme-elevation-100) !important;
    }

    .line-items-table-wrapper tbody tr td[data-label="Actions"]::before {
        display: none !important;
    }

    /* All inputs full width */
    .line-items-table-wrapper tbody tr td input {
        width: 100% !important;
    }

    /* ===== TOTAL ROW STYLING ===== */
    .line-items-table-wrapper tbody tr.total-row {
        background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(6, 182, 212, 0.05));
        border-color: rgba(6, 182, 212, 0.3);
        padding: 20px 16px;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }

    .line-items-table-wrapper tbody tr.total-row td {
        flex-direction: row !important;
        padding: 0 !important;
    }

    .line-items-table-wrapper tbody tr.total-row td::before {
        display: none !important;
    }

    .line-items-table-wrapper tbody tr.total-row td:empty {
        display: none !important;
    }

    /* ===== ACTION BUTTONS - FIX CLICKABILITY ===== */

    /* Make sure Actions cell doesn't block clicks */
    .line-items-table-wrapper tbody tr td[data-label="Actions"] {
        position: relative;
        overflow: visible;
    }

    .line-items-actions {
        display: flex !important;
        flex-direction: row !important;
        width: 100%;
        gap: 8px;
        position: relative;
        z-index: 10;
    }

    .line-items-actions button {
        display: flex !important;
        align-items: center;
        justify-content: center;
        flex: 1;
        padding: 12px 16px !important;
        font-size: 13px !important;
        cursor: pointer !important;
        pointer-events: auto !important;
        position: relative;
        z-index: 20;
        min-height: 44px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
    }

    /* Remove button specific styles */
    .line-items-actions button[title="Remove item"] {
        background-color: rgba(239, 68, 68, 0.1) !important;
        color: #ef4444 !important;
        border: 1px solid #ef4444 !important;
    }

    .line-items-actions button[title="Remove item"]:hover,
    .line-items-actions button[title="Remove item"]:active {
        background-color: rgba(239, 68, 68, 0.2) !important;
    }

    /* Save button specific styles */
    .line-items-actions button[title="Save as reusable service"] {
        background-color: rgba(6, 182, 212, 0.1) !important;
        color: #06b6d4 !important;
        border: 1px solid #06b6d4 !important;
    }

    .line-items-actions button[title="Save as reusable service"]:hover,
    .line-items-actions button[title="Save as reusable service"]:active {
        background-color: rgba(6, 182, 212, 0.2) !important;
    }

    /* Modal responsiveness */
    .line-items-modal {
        width: 95vw !important;
        padding: 16px !important;
    }

    /* Service cards in modal */
    .service-card-grid {
        grid-template-columns: 1fr !important;
    }

    /* Header adjustments */
    .line-items-header {
        flex-direction: column;
        gap: 12px;
        align-items: flex-start !important;
    }

    .add-item-button {
        width: 100%;
        justify-content: center;
    }
}

/* Tablet adjustments */
@media (max-width: 1024px) and (min-width: 769px) {

    /* PDF Preview takes full width on tablet */
    .pdf-preview-container {
        flex-basis: 100% !important;
        margin-top: 24px;
    }

    /* Form section takes full width */
    [class*="collapsible"] {
        flex-basis: 100% !important;
    }
}

/* Small phone adjustments */
@media (max-width: 480px) {

    /* Even smaller card padding */
    .line-items-table-wrapper tbody tr {
        padding: 12px;
        gap: 10px;
    }

    /* Larger inputs for touch */
    .line-items-table-wrapper input {
        padding: 12px !important;
        font-size: 14px !important;
    }

    /* Larger touch targets for mobile */
    .line-items-actions button {
        padding: 12px 16px !important;
        font-size: 13px !important;
        min-height: 44px;
    }
}